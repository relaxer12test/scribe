# Development Guide

## Quick start (local)
1. Install deps and setup the database: `mix setup`
2. Run the server: `mix phx.server`
3. Visit `http://localhost:4000`

### Docker (optional)
Run everything with Docker: `docker-compose up --build` (uses `.env`).

## Configuration
Runtime config lives in `config/runtime.exs`. Local dev defaults are in
`config/dev.exs` (Postgres on `localhost` with username/password `postgres`).

Required for core features:
- `GEMINI_API_KEY`
- `RECALL_API_KEY`

OAuth integrations (enable as needed):
- Google: `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`, `GOOGLE_REDIRECT_URI`
- HubSpot: `HUBSPOT_CLIENT_ID`, `HUBSPOT_CLIENT_SECRET`
- Salesforce: `SALESFORCE_CLIENT_ID`, `SALESFORCE_CLIENT_SECRET`, `SALESFORCE_REDIRECT_URI`, `SALESFORCE_SITE`
- LinkedIn: `LINKEDIN_CLIENT_ID`, `LINKEDIN_CLIENT_SECRET`, `LINKEDIN_REDIRECT_URI`
- Facebook: `FACEBOOK_CLIENT_ID`, `FACEBOOK_CLIENT_SECRET`, `FACEBOOK_REDIRECT_URI`

Infra/production:
- `DATABASE_URL`, `SECRET_KEY_BASE`, `PHX_HOST`, `PORT`, `POOL_SIZE`

## Project map
- `lib/social_scribe_web/live/meeting_live/`: meeting details, CRM modal, apply updates
- `lib/social_scribe_web/components/`: modal UI and shared components
- `lib/social_scribe/ai_content_generator.ex`: Gemini prompts and parsing
- `lib/social_scribe/crm_providers.ex`: provider config and routing
- `lib/social_scribe/*_api.ex`: external API clients
- `lib/social_scribe/chat_*`: chat assistant and mention parsing

## CRM update flow
1. User selects a contact in the modal.
2. Suggestions are generated by `HubspotSuggestions` or `SalesforceSuggestions`.
3. The UI shows current values next to suggested values.
4. Suggestions are never auto-applied; users must select the fields to update.

## Tests
- `mix test`
- `mix test test/social_scribe/hubspot_suggestions_test.exs`
- `mix test test/social_scribe/salesforce_suggestions_test.exs`

## Workflow principle
When touching a tricky flow, favor a small refactor that makes the change easy
before making the easy change.
